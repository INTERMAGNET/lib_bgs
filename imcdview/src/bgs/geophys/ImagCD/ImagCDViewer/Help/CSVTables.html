<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<HTML>
<HEAD>
<TITLE>Intermagnet CD Data Viewer - CSV Tables</TITLE>
<link rel="stylesheet" href="normal_ws.css" type="text/css">
</HEAD>
<BODY>

<h4>
Quick links:
&nbsp&nbsp<a href="Contents.html">Contents</a>
&nbsp&nbsp<a href="Index.html">Index</a>
</h4>
<hr>

<h1>Intermagnet CD Data Viewer</H1>
<h1>CSV Tables</h1>
<p>
The INTERMAGNET CD data viewer needs two tables to tell it about countries and observatories:

<table>
 <tr><td>ctr.csv<td>ISO Country codes
 <tr><td>obs.csv<td>All observatories worldwide (not limited to the
                        observatories on any CD-ROM or DVD).
</table>

<p>
The files must be in Excel CSV (comma seprated values) format, a simple ASCII format
that you can read and write using Microsoft Excel (because they are ASCII you could
use a plain text editor, but it is easier to use Excel). Each file must contain a header row
as the first line, followed by data rows. There must be no empty rows between the header and 
the end of the data or within the data rows. The header line tells you what information should go in each
column. For ctr.csv the columns are:

<p>
<table border>
 <tr><td><b>Name</b><td><b>Data type</b>
 <tr><td>Country<td>String
 <tr><td>3 Digit Code<td>String
 <tr><td>Intermagnet Code<td>String (may be empty)
</table>

<p>
The '3 Digit Code' field contains country codes to ISO standard 3166. These codes can be found at
one of the following addresses: 
<a href="internal_exec:show_external_web_page&http://userpage.chemie.fu-berlin.de/diverse/doc/ISO_3166.html">
http://userpage.chemie.fu-berlin.de/diverse/doc/ISO_3166.html</a>.
<a href="internal_exec:show_external_web_page&http://unstats.un.org/unsd/methods/m49/m49alpha.htm">
http://unstats.un.org/unsd/methods/m49/m49alpha.htm</a>

<p>
The 'Intermagnet Code' field is used to 'translate' non-ISO standard codes that
have been used on the INTERMANGET CD-ROM. In some cases more than one code has
been used to designate a country. For these situations enter two (or more) rows 
for the country with one of the Intermagnet Codes on each row. Where the
CD-ROM only uses the standard code, the 'Intermagnet Code' field can be left
blank. For an example of this, see the entries for China.

<p>
For obs.csv the headers are:

<p>
<table border>
 <tr><td><b>Name</b><td><b>Data type</b>
 <tr><td>IAGA Code<td>String
 <tr><td>Observatory Name<td>String
 <tr><td>Latitude<td>Real number
 <tr><td>Longitude<td>Real number
 <tr><td>Altitude (metres)<td>Integer number
 <tr><td>Country Code<td>String (contains either the INTERMAGNET code or the
                         3 digit ISO code from ctr.csv).
 <tr><td>Year Valid From<td>Integer number (may be empty)
 <tr><td>Year Valid To<td>Integer number (may be empty)
</table>


<p>
<h2>File versions</h2>

<p>
To allow the country and observatory tables to be updated, the software supports 
version numbers for the table files. Filenames are modified to be in the form:

<table>
 <tr><td>ctr_vNNN.csv
 <tr><td>obs_vNNN.csv
</table>

<p>
Where NNN is the version number (note that file name lengths have been kept to the 
DOS 8.3 standard). The file with the 
highest version number is used by the software. Version numbers must be
between 100 and 999.

<p>
<h2>File locations</h2>

<p>
The software uses the most recent version of both CSV files that it
finds in the configuration directory ($HOME/.imag/). On Windows $HOME translates
to your 'documents and settings' directory, so look for the files
in somewhere like 
c:\documents and settings\<i>your-username</i>\.imag\ - on UNIX $HOME
is your login directory.

<p>
Each time the software starts it checks for new versions of these
files in the software distribution
itself (i.e. inside the JAVA jar file). Any versions
of the files found in the software distribution that are more
recent than those in the configuration directory
will be copied to the configuration directory and used immediately.

<p>
The software also checks databases when they are loaded to
see if they contain new versions of these files (the databases
may include a CD-ROM drive, which may contain a new
CD-ROM). On the CD-ROM the files may be put in either of two places:

<p>
<table border>
 <tr><td><b>File</b><td>Location>
 <tr><td>ctr_vNNN.csv<td><b>magYYYY/csv</b> directory<br>
                         <b>magYYYY/ctry_inf</b> directory
 <tr><td>obs_vNNN.csv<td><b>magYYYY/csv</b> directory<br>
                         <b>magYYYY/obsy_inf</b> directory
</table>

<p>
The 'CSV' directory is new to the CD-ROM and has been added for the storage
of the country and observatory tables. Whichever location the files are stored
in the software will copy new files from the CD (as and when it finds 
them) to the configuration directory ($HOME/.imag/). After files have been 
copied the software will use the highest version number of the file from the 
configuration directory.

<p>
Users can provide their own versions of these files simply by copying them
to the configuration directory with a higher version number than any files that
already exist. If a user wants to
ensure that a particular file always takes precedence, then using 900 as a base 
number will work OK.

<p>
You can see the list of files that the program knows about from
'Help / Diagnostics / Configuration files'.

<hr>
<h4>
Quick links:
&nbsp&nbsp<a href="Contents.html">Contents</a>
&nbsp&nbsp<a href="Index.html">Index</a>
</h4>

</BODY>
</HTML>
